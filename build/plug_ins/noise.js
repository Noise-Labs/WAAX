!function(WX){"use strict";function createGaussian(duration){for(var length=Math.floor(WX.srate*duration),noiseFloat32=new Float32Array(length),i=0;length>i;i++){var r1=Math.log(Math.random()),r2=Math.PI*Math.random();noiseFloat32[i]=Math.sqrt(-2*r1)*Math.cos(2*r2)*.5}var noiseBuffer=WX.Buffer(2,length,WX.srate);return noiseBuffer.getChannelData(0).set(noiseFloat32,0),noiseBuffer.getChannelData(1).set(noiseFloat32,0),noiseBuffer}function createPink(duration){for(var length=Math.floor(WX.srate*duration),noiseFloat32=new Float32Array(length),pA=[3.8024,2.9694,2.597,3.087,3.4006],pSum=[.00198,.01478,.06378,.23378,.91578],pASum=15.8564,sample=0,contrib=[0,0,0,0,0],i=0;length>i;i++){for(var ur1=Math.random(),ur2=Math.random(),j=0;5>j;j++)if(ur1<=pSum[j]){sample-=contrib[j],contrib[j]=2*(ur2-.5)*pA[j],sample+=contrib[j];break}noiseFloat32[i]=sample/pASum}console.log(noiseFloat32);var noiseBuffer=WX.Buffer(2,length,WX.srate);return noiseBuffer.getChannelData(0).set(noiseFloat32,0),noiseBuffer.getChannelData(1).set(noiseFloat32,0),noiseBuffer}function Noise(preset){WX.PlugIn.defineType(this,"Generator"),this._bufferGaus=createGaussian(9.73),this._bufferPink=createPink(9.73),this._src1=WX.Source(),this._src2=WX.Source(),this._src1.to(this._output),this._src2.to(this._output),this._src1.loop=!0,this._src2.loop=!0,this._src1.start(0),this._src2.start(0),WX.defineParams(this,{type:{type:"Itemized",name:"Type","default":"white",model:NOISETYPE}}),WX.PlugIn.initPreset(this,preset)}var NOISETYPE=[{key:"White",value:"white"},{key:"Pink",value:"pink"}],_baseBufferGaus=createGaussian(10),_baseBufferPink=createPink(10);Noise.prototype={info:{name:"Noise",version:"0.0.1",api_version:"1.0.0-alpha",author:"Hongchan Choi",type:"Generator",description:"White and Pink Noise Generator"},defaultPreset:{type:"white"},$type:function(value){switch(value){case"white":this._src1.buffer=_baseBufferGaus,this._src2.buffer=this._bufferGaus,this._src1.loopStart=10*Math.random();break;case"pink":this._src1.buffer=_baseBufferPink,this._src2.buffer=this._bufferPink,this._src1.loopStart=10*Math.random()}}},WX.PlugIn.extendPrototype(Noise,"Generator"),WX.PlugIn.register(Noise)}(WX);