!function(WX){"use strict";function a(a){WX.Plugin.defineType(this,"Generator"),this.ready=!1,this.bufferRef=null,this._filter=WX.Filter(),this._panner=WX.Panner(),this._filter.to(this._panner).to(this._output),WX.defineParams(this,{tune:{type:"Generic","default":0,min:-48,max:48,unit:"Semitone"},pitchMod:{type:"Boolean","default":!0},velocityMod:{type:"Boolean","default":!0},ampAttack:{type:"Generic","default":.02,min:0,max:5,unit:"Seconds"},ampDecay:{type:"Generic","default":.04,min:0,max:5,unit:"Seconds"},ampSustain:{type:"Generic","default":.25,min:0,max:1,unit:"LinearGain"},ampRelease:{type:"Generic","default":.2,min:0,max:10,unit:"Seconds"},filterType:{type:"Items","default":"lowpass",items:b,label:"Filter Type"},filterFrequency:{type:"Generic","default":1e3,min:20,max:5e3,unit:"Hertz"},filterQ:{type:"Generic","default":0,min:0,max:40},filterGain:{type:"Generic","default":0,min:-40,max:40,unit:"LinearGain"},filterModAmount:{type:"Generic","default":1,min:.25,max:8},filterDetune:{type:"Generic","default":0,min:0,max:5,unit:"Octave"},filterAttack:{type:"Generic","default":.02,min:0,max:5,unit:"Seconds"},filterHold:{type:"Generic","default":.04,min:0,max:5,unit:"Seconds"},filterRelease:{type:"Generic","default":.2,min:0,max:10,unit:"Seconds"},pan:{type:"Generic","default":.5,min:0,max:1}}),WX.Plugin.initPreset(this,a)}var b=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch"];a.prototype={info:{name:"SP1",api_version:"1.0.0-alpha",plugin_version:"0.0.1",author:"hoch",type:"instrument",description:"monotonic one-shot sampler (1 sample)"},defaultPreset:{tune:0,pitchMod:!0,velocityMod:!0,ampAttack:.01,ampHold:.44,ampRelease:.06,filterFrequency:140,filterQ:18,filterGain:0,filterModAmount:7,filterDetune:0,filterAttack:.01,filterHold:.07,filterRelease:.03,output:.8},$filterFrequency:function(a,b,c){this._filter.frequency.set(a,b,c)},$filterQ:function(a,b,c){this._filter.Q.set(a,b,c)},$filterGain:function(a,b,c){this._filter.gain.set(a,b,c)},$filterDetune:function(a,b,c){this._filter.detune.set(a,b,c)},play:function(a,b,c){if(this.ready){c=c||WX.now;var d=WX.Source(),e=WX.Gain();d.to(e).to(this._filter),d.buffer=this.bufferRef,d.playbackRate=Math.pow(2,(this.params.tune.get()+a)/1200);var f=this.params,g=f.ampAttack.get(),h=f.ampHold.get(),i=f.ampRelease.get(),j=1200*f.filterModAmount.get(),k=f.filterAttack.get(),l=f.filterHold.get(),m=f.filterRelease.get();d.start(c),e.gain.set(1,[c,g],3),this.$filterDetune(j,[c,k],3),e.gain.set(1,[c+g,h],3),this.$filterDetune(j,[c+k,l],3),e.gain.set(0,[c+g+h,i],3),this.$filterDetune(0,[c+k+l,m],3),d.stop(c+k+l+m)}},onData:function(a,b){switch(a){case"noteon":this.play(b.pitch,b.velocity)}},onLoaded:function(){},isReady:function(){return this.ready},setBuffer:function(a){this.bufferRef=a,this.ready=!0},loadClip:function(a,b){WX.isFunction(b)&&(this.onLoaded=b),WX.loadClip(a,function(){},function(a){this.setBuffer(a),this.onLoaded()}.bind(this))}},WX.Plugin.extendPrototype(a,"Generator"),WX.Plugin.register(a)}(WX);
//# sourceMappingURL=plug_ins.map