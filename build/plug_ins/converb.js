!function(WX){"use strict";function ConVerb(preset){WX.PlugIn.defineType(this,"Processor"),this.ready=!1,this.clip=null,this._dry=WX.Gain(),this._wet=WX.Gain(),this._convolver=WX.Convolver(),this._input.to(this._dry,this._convolver),this._convolver.to(this._wet),this._dry.to(this._output),this._wet.to(this._output),WX.defineParams(this,{mix:{type:"Generic",name:"Mix","default":.2,min:0,max:1}}),WX.PlugIn.initPreset(this,preset)}ConVerb.prototype={info:{name:"ConVerb",version:"0.0.1",api_version:"1.0.0-alpha",author:"Hongchan Choi",type:"Processor",description:"Convolution Reverb"},defaultPreset:{mix:.2},$mix:function(value,time,rampType){this._dry.gain.set(1-value,time,rampType),this._wet.gain.set(value,time,rampType)},_onprogress:function(){},_onloaded:function(clip){this.setClip(clip)},isReady:function(){return this.ready},setClip:function(clip){this.clip=clip,this._convolver.buffer=this.clip.buffer,this.ready=!0},loadClip:function(clip){WX.loadClip(clip,this._onloaded.bind(this),this._onprogress.bind(this))}},WX.PlugIn.extendPrototype(ConVerb,"Processor"),WX.PlugIn.register(ConVerb)}(WX);