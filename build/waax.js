window.WX=function(){"use strict";var a=function(){var a="1.0.0-alpha";return{getVersion:function(){return a}}}(),b=function(){var a=1,b=window.console;return{setLevel:function(b){a=b},info:function(){if(!(a>1)){var c=Array.prototype.slice.call(arguments);c.unshift("[WX:info]"),b.log.apply(b,c)}},warn:function(){if(!(a>2)){var c=Array.prototype.slice.call(arguments);c.unshift("[WX:warn]"),b.log.apply(b,c)}},error:function(){var a=Array.prototype.slice.call(arguments);throw a.unshift("[WX:error]"),b.log.apply(b,a),new Error("[WX:error]")}}}(),c=function(){var a=Math.LN2,b=Math.LN10,c=3.282417553401589e38;return{isObject:function(a){return a===Object(a)},isFunction:function(a){return"[object Function]"===toString.call(a)},isArray:function(a){return"[object Array]"===toString.call(a)},isNumber:function(a){return"[object Number]"===toString.call(a)},isBoolean:function(a){return"[object Boolean]"===toString.call(a)},hasParam:function(a,b){return hasOwnProperty.call(a.params,b)},extend:function(a,b){for(var c in b)a[c]=b[c];return a},clone:function(a){var b={};for(var c in a)b[c]=a[c];return b},validateModel:function(a){if(0===a.length)return!1;for(var b=[],c=0;c<a.length;c++){if(b.indexOf(a[c].key)>-1)return!1;b.push(a[c].key)}return!0},findKeyByValue:function(a,b){for(var c=0;c<a.length;c++)if(a[c].value===b)return a[c].key;return null},findValueByKey:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key===b)return a[c].value;return null},clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},random2f:function(a,b){return a+Math.random()*(b-a)},random2:function(a,b){return Math.round(a+Math.random()*(b-a))},mtof:function(a){return-1500>=a?0:a>1499?c:440*Math.pow(2,(Math.floor(a)-69)/12)},ftom:function(b){return Math.floor(b>0?Math.log(b/440)/a*12+69:-1500)},powtodb:function(a){if(0>=a)return 0;var c=100+10/b*Math.log(a);return 0>c?0:c},dbtopow:function(a){return 0>=a?0:(a>870&&(a=870),Math.exp(.1*b*(a-100)))},rmstodb:function(a){if(0>=a)return 0;var c=100+20/b*Math.log(a);return 0>c?0:c},dbtorms:function(a){return 0>=a?0:(a>485&&(a=485),Math.exp(.05*b*(a-100)))},lintodb:function(a){return 20*(a>1e-5?Math.log(a)/b:-5)},dbtolin:function(a){return Math.pow(10,a/20)},veltoamp:function(a){return a/127}}}();window.hasOwnProperty("webkitAudioContext")||window.hasOwnProperty("AudioContext")?window.hasOwnProperty("webkitAudioContext")&&(window.AudioContext=window.webkitAudioContext):b.error("Web Audio API is not supported. See http://caniuse.com/audio-api for more info.");var d=function(){function e(){var a=arguments;return function(b,d){var e=[];b=b||0,d=d||1;for(var f=0;f<a.length;f++){var g,h=a[f][0];c.isArray(a[f][1])?(g=[b+a[f][1][0],b+a[f][1][1]],e.push([h*d,g,3])):(g=b+a[f][1],e.push([h*d,g,a[f][2]||0]))}return e}}function f(c,e,f){if(!e)return void b.error("Specify `oncomplete` action.");var g=new XMLHttpRequest;g.open("GET",c.url,!0),g.responseType="arraybuffer",g.onprogress=function(a){f&&f(a,c)},g.onload=function(){try{d.ctx.decodeAudioData(g.response,function(a){c.buffer=a,e(c)})}catch(b){a.error("Loading clip failed. (XHR failure)",b.message,c.url)}},g.send()}function g(a,d){return c.isNumber(a)?a:void 0===a?d:void b.error("Invalid parameter configuration")}function h(a){switch(n.indexOf(a.type)<0&&b.error("Invalid Parameter Type."),a.type){case"Generic":return new i(a);case"Itemized":return new j(a);case"Boolean":return new k(a)}}function i(a){this.init(a)}function j(a){this.init(a)}function k(a){this.init(a)}var l=new AudioContext,m=window.AudioParam.prototype;AudioNode.prototype.to=function(){for(var a=0;a<arguments.length;a++)this.connect(arguments[a]);return arguments[0]},AudioNode.prototype.cut=function(){this.disconnect()},AudioParam.prototype.cancel=m.cancelScheduledValues,AudioParam.prototype.set=function(a,b,c){switch(c){case 0:case void 0:b=b<l.currentTime?l.currentTime:b,this.setValueAtTime(a,b),b<l.currentTime&&a!==this.value&&(this.value=a);break;case 1:b=b<l.currentTime?l.currentTime:b,this.linearRampToValueAtTime(a,b);break;case 2:b=b<l.currentTime?l.currentTime:b,a=0>=a?1e-5:a,this.exponentialRampToValueAtTime(a,b);break;case 3:b[0]=b[0]<l.currentTime?l.currentTime:b[0],a=0>=a?1e-5:a,this.setTargetAtTime(a,b[0],b[1])}};var n=["Generic","Itemized","Boolean"];return i.prototype={init:function(a){this.type="Generic",this.name=a.name||"Parameter",this.unit=a.unit||"",this.value=this.default=g(a.default,0),this.min=g(a.min,0),this.max=g(a.max,1),this._parent=a._parent,this.$callback=a._parent["$"+a._paramId]},set:function(a,b,d){this.value=c.clamp(a,this.min,this.max),this.$callback&&this.$callback.call(this._parent,this.value,b,d)},get:function(){return this.value}},j.prototype={init:function(a){c.isArray(a.model)||b.error("Model is missing."),c.validateModel(a.model)||b.error("Invalid Model."),this.type="Itemized",this.name=a.name||"Select",this.model=a.model,this.default=a.default||this.model[0].value,this.value=this.default,this._parent=a._parent,this.$callback=a._parent["$"+a._paramId]},set:function(a,b,d){c.findKeyByValue(this.model,a)&&(this.value=a,this.$callback&&this.$callback.call(this._parent,this.value,b,d))},get:function(){return this.value},getModel:function(){return this.model}},k.prototype={init:function(a){c.isBoolean(a.default)||b.error("Invalid value for Boolean Parameter."),this.type="Boolean",this.name=a.name||"Toggle",this.value=this.default=a.default,this._parent=a._parent,this.$callback=a._parent["$"+a._paramId]},set:function(a,b,d){c.isBoolean(a)&&(this.value=a,this.$callback&&this.$callback.call(this._parent,this.value,b,d))},get:function(){return this.value}},{ctx:l,Gain:function(){return l.createGain()},OSC:function(){return l.createOscillator()},Delay:function(){return l.createDelay()},Filter:function(){return l.createBiquadFilter()},Comp:function(){return l.createDynamicsCompressor()},Convolver:function(){return l.createConvolver()},WaveShaper:function(){return l.createWaveShaper()},Source:function(){return l.createBufferSource()},Analyzer:function(){return l.createAnalyser()},Panner:function(){return l.createPanner()},PeriodicWave:function(){return l.createPeriodicWave.apply(l,arguments)},Splitter:function(){return l.createChannelSplitter.apply(l,arguments)},Merger:function(){return l.createChannelMerger.apply(l,arguments)},Buffer:function(){return l.createBuffer.apply(l,arguments)},Envelope:e,defineParams:function(a,b){for(var c in b)b[c]._parent=a,b[c]._paramId=c,a.params[c]=h(b[c])},loadClip:f}}(),e=function(){function e(){this.params={}}function f(){e.call(this),this._output=d.Gain(),this._outlet=d.Gain(),this._output.to(this._outlet),d.defineParams(this,{output:{type:"Generic",name:"Output","default":1,min:0,max:1,unit:"LinearGain"}})}function g(){e.call(this),this._inlet=d.Gain(),this._input=d.Gain(),this._output=d.Gain(),this._active=d.Gain(),this._bypass=d.Gain(),this._outlet=d.Gain(),this._inlet.to(this._input,this._bypass),this._output.to(this._active).to(this._outlet),this._bypass.to(this._outlet),this._active.gain.value=1,this._bypass.gain.value=0,d.defineParams(this,{input:{type:"Generic",name:"Input","default":1,min:0,max:1,unit:"LinearGain"},output:{type:"Generic",name:"Output","default":1,min:0,max:1,unit:"LinearGain"},bypass:{type:"Boolean",name:"Bypass","default":!1}})}function h(){e.call(this),this._inlet=d.Gain(),this._input=d.Gain(),this._outlet=d.Gain(),this._inlet.to(this._input),this._inlet.to(this._outlet),d.defineParams(this,{input:{type:"Generic",name:"Input","default":1,min:0,max:1,unit:"LinearGain"}})}var i=["Generator","Processor","Analyzer"];return e.prototype={set:function(a,b){if(c.hasParam(this,a))if(c.isArray(b))for(var e=0;e<b.length;e++)this.params[a].set.apply(this,b[e]);else this.params[a].set(b,d.ctx.currentTime,0);return this},get:function(a){return c.hasParam(this,a)?this.params[a].get():null},setPreset:function(a){for(var b in a)this.params[b].set(a[b],d.ctx.currentTime,0)},getPreset:function(){var a={};for(var b in this.params)a[b]=this.params[b].get();return a}},f.prototype={to:function(a){if(a._inlet)return this._outlet.to(a._inlet),a;try{return this._outlet.to(a),a}catch(c){b.error("Connection failed. Invalid patching.")}},cut:function(){this._outlet.cut()},$output:function(a,b,c){this._output.gain.set(a,b,c)}},c.extend(f.prototype,e.prototype),g.prototype={$input:function(a,b,c){this._input.gain.set(a,b,c)},$bypass:function(a){a?(this._active.gain.value=0,this._bypass.gain.value=1):(this._active.gain.value=1,this._bypass.gain.value=0)}},c.extend(g.prototype,f.prototype),h.prototype={to:function(a){if(a._inlet)return this._outlet.to(a._inlet),a;try{return this._outlet.to(a),a}catch(c){b.error("Connection failed. Invalid patching.")}},cut:function(){this._outlet.cut()},$input:function(a,b,c){this._input.gain.set(a,b,c)}},c.extend(h.prototype,e.prototype),{defineType:function(a,c){switch(i.indexOf(c)<0&&b.error("Invalid Plug-in type."),c){case"Generator":f.call(a);break;case"Processor":g.call(a);break;case"Analyzer":h.call(a)}},initPreset:function(a,b){var d=c.clone(a.defaultPreset);c.extend(d,b),a.setPreset(d)},extendPrototype:function(a,d){switch(i.indexOf(d)<0&&b.error("Invalid Plug-in type."),d){case"Generator":c.extend(a.prototype,f.prototype);break;case"Processor":c.extend(a.prototype,g.prototype);break;case"Analyzer":c.extend(a.prototype,h.prototype)}},register:function(c){var d=c.prototype.info;a.getVersion()>d.api_version&&b.error(c.name,": loading failed. incompatible WAAX version."),window.WX[c.name]=function(a){return new c(a)}}}}();return function(){b.info("WAAX",a.getVersion(),"("+d.ctx.sampleRate+"Hz)")}(),{Info:a,Log:b,isObject:c.isObject,isFunction:c.isFunction,isArray:c.isArray,isNumber:c.isNumber,isBoolean:c.isBoolean,hasParam:c.hasParam,extend:c.extend,clone:c.clone,validateModel:c.validateModel,findKeyByValue:c.findKeyByValue,findValueByKey:c.findValueByKey,clamp:c.clamp,random2f:c.random2f,random2:c.random2,mtof:c.mtof,ftom:c.ftom,powtodb:c.powtodb,dbtopow:c.dbtopow,rmstodb:c.rmstodb,dbtorms:c.dbtorms,lintodb:c.lintodb,dbtolin:c.dbtolin,veltoamp:c.veltoamp,context:d.ctx,get now(){return d.ctx.currentTime},get srate(){return d.ctx.sampleRate},Gain:d.Gain,OSC:d.OSC,Delay:d.Delay,Filter:d.Filter,Comp:d.Comp,Convolver:d.Convolver,WaveShaper:d.WaveShaper,Source:d.Source,Analyzer:d.Analyzer,Panner:d.Panner,PeriodicWave:d.PeriodicWave,Splitter:d.Splitter,Merger:d.Merger,Buffer:d.Buffer,Envelope:d.Envelope,defineParams:d.defineParams,loadClip:d.loadClip,Plugin:e}}(),window.MUI=function(){function a(a,b,c){this.senderId=a,this.container=b,this.callback=c,this.ondragged=this.dragged.bind(this),this.onreleased=this.released.bind(this),this._prevTS=0,this.onclicked(b)}function b(a,b,c){this.senderId=a,this.container=b,this.callback=c,this.onkeypress=this.keypressed.bind(this),this.onblur=this.finished.bind(this),this.onfocus(b)}return a.prototype={getEventData:function(a){var b=this.container.getBoundingClientRect();return{x:a.clientX-b.left,y:a.clientY-b.top,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey}},onclicked:function(a){a.addEventListener("mousedown",function(a){a.preventDefault(),this._prevTS=a.timeStamp;var b=this.getEventData(a);this.callback(this.senderId,"clicked",b),window.addEventListener("mousemove",this.ondragged,!1),window.addEventListener("mouseup",this.onreleased,!1)}.bind(this),!1)},dragged:function(a){if(a.preventDefault(),!(a.timeStamp-this._prevTS<16.7)){this._prevTS=a.timeStamp;var b=this.getEventData(a);this.callback(this.senderId,"dragged",b)}},released:function(a){a.preventDefault();var b=this.getEventData(a);this.callback(this.senderId,"released",b),window.removeEventListener("mousemove",this.ondragged,!1),window.removeEventListener("mouseup",this.onreleased,!1)}},b.prototype={onfocus:function(){this.container.addEventListener("mousedown",function(a){a.preventDefault(),this.callback(this.senderId,"clicked",null),this.container.addEventListener("keypress",this.onkeypress,!1),this.container.addEventListener("blur",this.onblur,!1)}.bind(this),!1)},keypressed:function(a){this.callback(this.senderId,"keypressed",a.keyCode)},finished:function(){this.callback(this.senderId,"finished",null),this.container.removeEventListener("keypress",this.onkeypress,!1),this.container.removeEventListener("blur",this.onblur,!1)}},{clamp:function(a,b,c){return Math.max(Math.min(a,c),b)},clone:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return a},findValueByKey:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key===b)return a[c].value;return a[0].value},findKeyByValue:function(a,b){for(var c=0;c<a.length;c++)if(a[c].value===b)return a[c].key},MouseResponder:function(b,c,d){return new a(b,c,d)},KeyResponder:function(a,c,d){return new b(a,c,d)},buildControls:function(a,b){var c=document.getElementById(b);for(var d in a.params){var e=a.params[d];switch(e.type){case"Generic":var f=document.createElement("mui-knob");f.link(a,d),c.appendChild(f);break;case"Itemized":var g=document.createElement("mui-select");g.link(a,d),c.appendChild(g);break;case"Boolean":var h=document.createElement("mui-button");h.type="toggle",h.link(a,d),c.appendChild(h)}}},$:function(a){return document.getElementById(a)}}}(WX),function(WX){function a(a){WX.Plugin.defineType(this,"Processor"),this._input.connect(this._output),WX.defineParams(this,{mute:{type:"Boolean","default":!1},dB:{type:"Generic","default":0,min:-90,max:12,unit:"Decibels"}}),WX.Plugin.initPreset(this,a)}a.prototype={info:{name:"Fader",api_version:"1.0.0-alpha",plugin_version:"0.0.1",author:"hoch",type:"Processor",description:"channel fader"},defaultPreset:{mute:!1,dB:0},$mute:function(a){a?this._outlet.gain.set(0,WX.now,0):this._outlet.gain.set(1,WX.now,0)},$dB:function(a,b,c){this._output.gain.set(WX.dbtolin(a),b,c)}},WX.Plugin.extendPrototype(a,"Processor"),WX.Plugin.register(a),WX.Master=WX.Fader(),WX.Master.to(WX.context.destination)}(WX);
//# sourceMappingURL=waax.map