<!DOCTYPE html>
<html>

<head>
  <!-- waax r12 -->
  <script src="../src/WAAX.js"></script>
  <script src="../src/Fader.js"></script>
  <script src="../src/Oscil.js"></script>
  <!-- polymer core -->
  <script src="lib/polymer.min.js"></script>
  <!-- mui core + style -->
  <script src="mui-core.js"></script>
  <link rel="stylesheet" type="text/css" href="mui-core.css">
  <!-- mui elements -->
  <link rel="import" href="elements/mui-knob.html">
  <link rel="import" href="elements/mui-hslider.html">
  <link rel="import" href="elements/mui-toggle.html">
  <link rel="import" href="elements/mui-button.html">
  <link rel="import" href="elements/mui-select.html">
  <!-- firebase -->
  <script src='https://cdn.firebase.com/v0/firebase.js'></script>
</head>

<body>

  <div class="container" style="width: 1104px; margin:20px auto;">
    <div class="c-mui-panel">
      <h1>SAMPLER</h1>
      <div class="c-mui-section-noborder" style="width:180px">
        <mui-select label="Sample"></mui-select>
        <mui-select label="Preset"></mui-select>
      </div>
      <div class="c-mui-section">
        <h2>SAMPLE</h2>
        <mui-toggle label="ON"></mui-toggle>
        <mui-knob label="Tune" value="0" min="-1200" max="1200"></mui-knob>
        <mui-knob label="Pan" value="0.0" min="-1" max="1"></mui-knob>
      </div>
      <div class="c-mui-section">
        <h2>ENVELOPE</h2>
        <mui-toggle label="ON"></mui-toggle>
        <mui-knob label="Attack" value="0.0" min="0.0" max="1.0"></mui-knob>
        <mui-knob label="Hold" value="0.02" min="0.0" max="1.0"></mui-knob>
        <mui-knob label="Release" value="0.02" min="0.0" max="2.0"></mui-knob>
      </div>
      <div class="c-mui-section">
        <h2>2-BAND EQ</h2>
        <mui-toggle label="ON"></mui-toggle>
        <mui-knob label="L Freq" value="250" min="60.0" max="1500.0"></mui-knob>
        <mui-knob label="L Gain" value="0.0" min="-24.0" max="24.0"></mui-knob>
        <mui-knob label="H Freq" value="2500" min="1500.0" max="5000.0"></mui-knob>
        <mui-knob label="H Gain" value="0.0" min="-24.0" max="24.0"></mui-knob>
      </div>
      <div class="c-mui-section">
        <h2>OUTPUT</h2>
        <mui-knob label="Send 1" value="0" min="0.0" max="1.0"></mui-knob>
        <mui-knob label="Send 2" value="0" min="0.0" max="1.0"></mui-knob>
        <mui-knob label="Send 3" value="0" min="0.0" max="1.0"></mui-knob>
        <mui-knob label="Volume" value="0.8" min="0.0" max="1.0"></mui-knob>
      </div>
    </div>

    <div class="c-mui-panel">
      <div class="c-mui-section-noborder">
        <mui-button id="btn-csave" icon="&#x55;"></mui-button>
        <mui-button id="btn-cload" icon="&#x44;"></mui-button>
        <mui-button id="btn-edit" icon="&#x45;"></mui-button>
      </div>
      <div class="c-mui-section-noborder">
        <mui-button id="btn-rewind" icon="&#x52;"></mui-button>
        <mui-button id="btn-stop" icon="&#x53;"></mui-button>
        <mui-button id="btn-play" icon="&#x50;"></mui-button>
        <mui-button id="btn-record" icon="&#x43;"></mui-button>
        <mui-button id="btn-metro" icon="&#x4d;"></mui-button>
      </div>
    </div>

    <div class="c-mui-panel">
      <h1>MASTER</h1>
      <div class="c-mui-section">
        <h2>CHORUS - SEND 1</h2>
        <mui-knob label="Rate" value="0"></mui-knob>
        <mui-knob label="Intensity" value="0.0"></mui-knob>
      </div>
      <div class="c-mui-section">
        <h2>DELAY - SEND 2</h2>
        <mui-knob label="Delay Time" value="0"></mui-knob>
        <mui-knob label="Feedback" value="0.0"></mui-knob>
      </div>
      <div class="c-mui-section">
        <h2>REVERB - SEND 3</h2>
        <mui-select label="Preset"></mui-select>
        <mui-knob label="Mix" value="0.0"></mui-knob>
      </div>
      <div class="c-mui-section">
        <h2>Saturator</h2>
        <mui-toggle label="ON"></mui-toggle>
        <mui-knob label="Quality" value="0.0"></mui-knob>
        <mui-knob label="Drive" value="0.0"></mui-knob>
      </div>
      <div class="c-mui-section">
        <h2>Compressor</h2>
        <mui-toggle label="ON"></mui-toggle>
        <mui-knob label="Threshold" value="-4.0" min="-48.0" max="0.0"></mui-knob>
        <mui-knob label="Ratio" value="4.0" min="0.0" max="20.0"></mui-knob>
        <mui-knob label="Attack" value="0.015" min="0.0" max="1.0"></mui-knob>
        <mui-knob label="Release" value="0.300" min="0.0" max="2.0"></mui-knob>
        <mui-knob label="Makeup" value="0.0" min="0.0" max="20.0"></mui-knob>
      </div>
      <div class="c-mui-section" style="width:80px;">
        <h2>Master</h2>
        <mui-knob label="Out" value="0.0" min="-24.0" max="24.0"></mui-knob>
      </div>

    </div>
  <div>

  <script type="text/javascript">



  /*
    var Synth = {
      o1: WX.Oscil({ pType: 'triangle', pActive: true, pGain: 0.25 }),
      o2: WX.Oscil({ pType: 'sawtooth', pActive: false, pFreq: 880.0, pGain: 0.7 }),
    };

    Synth.o1.to(WX.DAC);
    Synth.o2.to(WX.DAC);

    var p;
    var fbase = new Firebase('https://gridflux-test.firebaseio.com/');

    // MUI collection format
    var waveforms = [
      { key: 'Sine', value: 'sine' },
      { key: 'Square', value: 'square' },
      { key: 'Sawtooth', value: 'sawtooth' },
      { key: 'Triangle', value: 'triangle' }
    ];

    function init() {
      MUI.$('select-waveform').setModel(waveforms);
      MUI.$('slider-master').link(WX.DAC, 'pdB');
      changeView(Synth.o1);

      fbase.on('child_added', function(snapshot) {
        var message = snapshot.val();
        console.log(JSON.parse(message));
      });
    }

    function changeView(unit) {
      MUI.$('knob-freq').link(unit, 'pFreq');
      MUI.$('knob-gain').link(unit, 'pGain');
      MUI.$('toggle-active').link(unit, 'pActive');
      MUI.$('select-waveform').link(unit, 'pType');
    }

    function savePreset() {
      var preset = {
        'o1': Synth.o1.getParams(),
        'o2': Synth.o2.getParams(),
        'DAC': WX.DAC.getParams()
      };
      fbase.set({ 'SynthPreset': JSON.stringify(preset) });
    }

    function loadPreset() {
      Synth.o1.setParams(p['o1']);
      Synth.o2.setParams(p['o2']);
      WX.DAC.setParams(p['DAC']);
    };
    */

  function init() {

    MUI.$('btn-rewind').onclick = function () {
      console.log('rewind!');
    };
    MUI.$('btn-play').onclick = function () {
      console.log('play!');
    };
    MUI.$('btn-stop').onclick = function () {
      console.log('stop!');
    };
    MUI.$('btn-record').onclick = function () {
      console.log('record!');
    };

  }

  window.addEventListener('WebComponentsReady', init);

  </script>

</body>


</html>
