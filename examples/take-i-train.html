<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <h1>Take the I train!</h1>
    <canvas id="canvas-wx-waveform" width="600" height="300"></canvas>
    <script src="http://hoch.github.com/waax/build/WAAX.min.js"></script>
    <script>
      var cvs = document.getElementById("wx-uiPanel");

      var it = new WX.ImpTrain({ frequency:7 });
      var lp = new WX.LPRez({ cutoff:440, Q:12, a:2.0, d:1.0, s:0.5, r:2.0 });
      var wf = new WX.Waveform({ style:{ width:2 } });
      WX.DAC.db = -18;
      it.to(lp).to(WX.DAC);
      lp.to(wf);
      
      // loop
      function loop() {
        lp.cutoff = WX.random2f(80, 1500);
        lp.Q = WX.random2f(15, 25);
        lp.noteOn();
        lp.noteOff(3.0);
        setTimeout(function() {
          loop(); 
        }, 5000);
      }
      loop();
            
      // drawer
      function draw() {
        wf.draw();
        requestAnimationFrame(draw);
      }
      requestAnimationFrame(draw);
    </script>
  </body>
</html>