window.WX={},function(e){"use strict";var t="1.0.0-alpha";e.getVersion=function(){return t};var r=window.hasOwnProperty("webkitAudioContext"),n=window.hasOwnProperty("AudioContext");if(!r&&!n)throw new Error("FATAL: Web Audio API is not supported.");r&&!n&&(window.AudioContext=window.webkitAudioContext),e._ctx=new AudioContext,Object.defineProperties(e,{now:{get:function(){return e._ctx.currentTime}},srate:{get:function(){return e._ctx.sampleRate}}}),window.AudioNode.prototype.to=function(){for(var e=0;e<arguments.length;e++)this.connect(arguments[e]);return arguments[0]},window.AudioNode.prototype.cut=function(){this.disconnect()},window.AudioParam.prototype.cancel=window.AudioParam.prototype.cancelScheduledValues,window.AudioParam.prototype.set=function(t,r,n){var a=e._ctx.currentTime;switch(n){case 0:case void 0:r=a>r?a:r,this.setValueAtTime(t,r),a>=r&&t!==this.value&&(this.value=t);break;case 1:r=a>r?a:r,this.linearRampToValueAtTime(t,r);break;case 2:r=a>r?a:r,t=0>=t?1e-5:t,this.exponentialRampToValueAtTime(t,r);break;case 3:r[0]=r[0]<a?a:r[0],t=0>=t?1e-5:t,this.setTargetAtTime(t,r[0],r[1])}},e.Gain=function(){return e._ctx.createGain()},e.OSC=function(){return e._ctx.createOscillator()},e.Delay=function(){return e._ctx.createDelay()},e.Filter=function(){return e._ctx.createBiquadFilter()},e.Comp=function(){return e._ctx.createDynamicsCompressor()},e.Convolver=function(){return e._ctx.createConvolver()},e.WaveShaper=function(){return e._ctx.createWaveShaper()},e.Source=function(){return e._ctx.createBufferSource()},e.Analyzer=function(){return e._ctx.createAnalyser()},e.Panner=function(){return e._ctx.createPanner()},e.PeriodicWave=function(){return e._ctx.createPeriodicWave.apply(e._ctx,arguments)},e.Splitter=function(){return e._ctx.createChannelSplitter.apply(e._ctx,arguments)},e.Merger=function(){return e._ctx.createChannelMerger.apply(e._ctx,arguments)},e.Buffer=function(){return e._ctx.createBuffer.apply(e._ctx,arguments)},e.loadClip=function(t,r,n){if(!r)return void Log.error("Specify `oncomplete` action.");var a=new XMLHttpRequest;a.open("GET",t.url,!0),a.responseType="arraybuffer",a.onprogress=function(e){n&&n(e,t)},a.onload=function(){try{e._ctx.decodeAudioData(a.response,function(e){t.buffer=e,r(t)})}catch(n){e.Log.error("Loading clip failed. (XHR failure)",n.message,t.url)}},a.send()},e.WAVEFORMS=[{key:"Sine",value:"sine"},{key:"Square",value:"square"},{key:"Sawtooth",value:"sawtooth"},{key:"Triangle",value:"triangle"}],e.FILTER_TYPES=[{key:"LP",value:"lowpass"},{key:"HP",value:"highpass"},{key:"BP",value:"bandpass"},{key:"LS",value:"lowshelf"},{key:"HS",value:"highshelf"},{key:"PK",value:"peaking"},{key:"BR",value:"notch"},{key:"AP",value:"allpass"}]}(WX);
!function(n){var r=1;n.Log={},n.Log.setLevel=function(n){r=n},n.Log.info=function(){if(!(r>1)){var n=Array.prototype.slice.call(arguments);n.unshift("[WX:info]"),window.console.log.apply(window.console,n)}},n.Log.warn=function(){if(!(r>2)){var n=Array.prototype.slice.call(arguments);n.unshift("[WX:warn]"),window.console.log.apply(window.console,n)}},n.Log.error=function(){var n=Array.prototype.slice.call(arguments);throw n.unshift("[WX:error]"),window.console.log.apply(window.console,n),new Error("[WX:error]")};var t=Math.LN2,o=Math.LN10,e=3.282417553401589e38;n.isObject=function(n){return n===Object(n)},n.isFunction=function(n){return"[object Function]"===toString.call(n)},n.isArray=function(n){return"[object Array]"===toString.call(n)},n.isNumber=function(n){return"[object Number]"===toString.call(n)},n.isBoolean=function(n){return"[object Boolean]"===toString.call(n)},n.hasParam=function(n,r){return hasOwnProperty.call(n.params,r)},n.extend=function(n,r){for(var t in r)n[t]=r[t];return n},n.clone=function(n){var r={};for(var t in n)r[t]=n[t];return r},n.validateModel=function(n){if(0===n.length)return!1;for(var r=[],t=0;t<n.length;t++){if(r.indexOf(n[t].key)>-1)return!1;r.push(n[t].key)}return!0},n.findKeyByValue=function(n,r){for(var t=0;t<n.length;t++)if(n[t].value===r)return n[t].key;return null},n.findValueByKey=function(n,r){for(var t=0;t<n.length;t++)if(n[t].key===r)return n[t].value;return null},n.clamp=function(n,r,t){return Math.min(Math.max(n,r),t)},n.random2f=function(n,r){return n+Math.random()*(r-n)},n.random2=function(n,r){return Math.round(n+Math.random()*(r-n))},n.mtof=function(n){return-1500>=n?0:n>1499?e:440*Math.pow(2,(Math.floor(n)-69)/12)},n.ftom=function(n){return Math.floor(n>0?Math.log(n/440)/t*12+69:-1500)},n.powtodb=function(n){if(0>=n)return 0;var r=100+10/o*Math.log(n);return 0>r?0:r},n.dbtopow=function(n){return 0>=n?0:(n>870&&(n=870),Math.exp(.1*o*(n-100)))},n.rmstodb=function(n){if(0>=n)return 0;var r=100+20/o*Math.log(n);return 0>r?0:r},n.dbtorms=function(n){return 0>=n?0:(n>485&&(n=485),Math.exp(.05*o*(n-100)))},n.lintodb=function(n){return 20*(n>1e-5?Math.log(n)/o:-5)},n.dbtolin=function(n){return Math.pow(10,n/20)},n.veltoamp=function(n){return n/127}}(WX);
!function(t){function e(e,i){return t.isNumber(e)?e:void 0===e?i:void t.Log.error("Invalid parameter configuration.")}function i(e){switch(p.indexOf(e.type)<0&&t.Log.error("Invalid Parameter Type."),e.type){case"Generic":return new n(e);case"Itemized":return new a(e);case"Boolean":return new r(e)}}function n(t){this.init(t)}function a(t){this.init(t)}function r(t){this.init(t)}function s(){this.params={}}function o(){s.call(this),this._output=t.Gain(),this._outlet=t.Gain(),this._output.to(this._outlet),t.defineParams(this,{output:{type:"Generic",name:"Output","default":1,min:0,max:1,unit:"LinearGain"}})}function u(){s.call(this),this._inlet=t.Gain(),this._input=t.Gain(),this._output=t.Gain(),this._active=t.Gain(),this._bypass=t.Gain(),this._outlet=t.Gain(),this._inlet.to(this._input,this._bypass),this._output.to(this._active).to(this._outlet),this._bypass.to(this._outlet),this._active.gain.value=1,this._bypass.gain.value=0,t.defineParams(this,{input:{type:"Generic",name:"Input","default":1,min:0,max:1,unit:"LinearGain"},output:{type:"Generic",name:"Output","default":1,min:0,max:1,unit:"LinearGain"},bypass:{type:"Boolean",name:"Bypass","default":!1}})}function l(){s.call(this),this._inlet=t.Gain(),this._input=t.Gain(),this._analyzer=t.Analyzer(),this._outlet=t.Gain(),this._inlet.to(this._input).to(this._analyzer),this._inlet.to(this._outlet),t.defineParams(this,{input:{type:"Generic",name:"Input","default":1,min:0,max:1,unit:"LinearGain"}})}var p=["Generic","Itemized","Boolean"];n.prototype={init:function(t){this.type="Generic",this.name=t.name||"Parameter",this.unit=t.unit||"",this.value=this.default=e(t.default,0),this.min=e(t.min,0),this.max=e(t.max,1),this._parent=t._parent,this.$callback=t._parent["$"+t._paramId]},set:function(e,i,n){this.value=t.clamp(e,this.min,this.max),this.$callback&&this.$callback.call(this._parent,this.value,i,n)},get:function(){return this.value}},a.prototype={init:function(e){t.isArray(e.model)||Log.error("Model is missing."),t.validateModel(e.model)||Log.error("Invalid Model."),this.type="Itemized",this.name=e.name||"Select",this.model=e.model,this.default=e.default||this.model[0].value,this.value=this.default,this._parent=e._parent,this.$callback=e._parent["$"+e._paramId]},set:function(e,i,n){t.findKeyByValue(this.model,e)&&(this.value=e,this.$callback&&this.$callback.call(this._parent,this.value,i,n))},get:function(){return this.value},getModel:function(){return this.model}},r.prototype={init:function(e){t.isBoolean(e.default)||Log.error("Invalid value for Boolean Parameter."),this.type="Boolean",this.name=e.name||"Toggle",this.value=this.default=e.default,this._parent=e._parent,this.$callback=e._parent["$"+e._paramId]},set:function(e,i,n){t.isBoolean(e)&&(this.value=e,this.$callback&&this.$callback.call(this._parent,this.value,i,n))},get:function(){return this.value}},t.defineParams=function(t,e){for(var n in e)e[n]._parent=t,e[n]._paramId=n,t.params[n]=i(e[n])},t.Envelope=function(){var e=arguments;return function(i,n){var a=[];i=i||0,n=n||1;for(var r=0;r<e.length;r++){var s,o=e[r][0];t.isArray(e[r][1])?(s=[i+e[r][1][0],i+e[r][1][1]],a.push([o*n,s,3])):(s=i+e[r][1],a.push([o*n,s,e[r][2]||0]))}return a}};var h=["Generator","Processor","Analyzer"],c={Generator:[],Processor:[],Analyzer:[]};s.prototype={to:function(e){if(e._inlet)return this._outlet.to(e._inlet),e;try{return this._outlet.to(e),e}catch(i){t.Log.error("Connection failed. Invalid patching.")}},cut:function(){this._outlet.cut()},set:function(e,i){if(t.hasParam(this,e))if(t.isArray(i))for(var n=0;n<i.length;n++)this.params[e].set.apply(this,i[n]);else this.params[e].set(i,t.now,0);return this},get:function(e){return t.hasParam(this,e)?this.params[e].get():null},setPreset:function(e){for(var i in e)this.params[i].set(e[i],t.now,0)},getPreset:function(){var t={};for(var e in this.params)t[e]=this.params[e].get();return t}},o.prototype={$output:function(t,e,i){this._output.gain.set(t,e,i)}},t.extend(o.prototype,s.prototype),u.prototype={$input:function(t,e,i){this._input.gain.set(t,e,i)},$output:function(t,e,i){this._output.gain.set(t,e,i)},$bypass:function(e,i){i=i||t.now,e?(this._active.gain.set(0,i,0),this._bypass.gain.set(1,i,0)):(this._active.gain.set(1,i,0),this._bypass.gain.set(0,i,0))}},t.extend(u.prototype,o.prototype),l.prototype={$input:function(t,e,i){this._input.gain.set(t,e,i)}},t.extend(l.prototype,s.prototype),t.PlugIn={},t.PlugIn.defineType=function(e,i){switch(h.indexOf(i)<0&&t.Log.error("Invalid Plug-in type."),i){case"Generator":o.call(e);break;case"Processor":u.call(e);break;case"Analyzer":l.call(e)}},t.PlugIn.initPreset=function(e,i){var n=t.clone(e.defaultPreset);t.extend(n,i),e.setPreset(n)},t.PlugIn.extendPrototype=function(e,i){switch(h.indexOf(i)<0&&t.Log.error("Invalid Plug-in type."),i){case"Generator":t.extend(e.prototype,o.prototype);break;case"Processor":t.extend(e.prototype,u.prototype);break;case"Analyzer":t.extend(e.prototype,l.prototype)}},t.PlugIn.register=function(e){var i=e.prototype.info;t.getVersion()>i.api_version&&t.Log.error(e.name,": FATAL. incompatible WAAX version."),c[i.type].push(e.name),t[e.name]=function(t){return new e(t)}},t.PlugIn.getRegistered=function(t){var e=null;if(h.indexOf(t)>-1)switch(t){case"Generator":e=c.Generator.slice(0);break;case"Processor":e=c.Processor.slice(0);break;case"Analyzer":e=c.Analyzer.slice(0)}return e},t.Log.info("WAAX",t.getVersion(),"("+t.srate+"Hz)")}(WX);
!function(t){function i(t,i,s,n){this.pitch=t||60,this.velocity=i||100,this.start=s||0,this.dur=n||120}function s(){this.notes=[],this.diffScore=0}function n(t){this.BPM=t,this.oldBPM=t,this.absOrigin=0,this.absOldNow=0,this.now=0,this.loopStart=0,this.loopEnd=0,this.lookahead=0,this.scanStart=0,this.scanEnd=this.lookahead,this.needsScan=!0,this.BIS=0,this.TIS=0,this.playbackQ=[],this.notelists=[],this.targets=[],this.views=[],this.RUNNING=!1,this.LOOP=!1,this.USE_METRONOME=!1,this.setBPM(t),this._loop()}var h=480;i.prototype={setNote:function(t){this.pitch=t.pitch,this.velocity=t.velocity,this.start=t.start,this.dur=t.dur},getEnd:function(){return this.start+this.dur},movePitch:function(i){this.pitch+=i,this.pitch=t.clamp(this.pitch,0,127)},moveStart:function(t){this.start+=t,this.start=Math.max(this.start,0)},changeDur:function(t){this.dur+=t,this.dur=Math.max(this.dur,1)}},s.prototype={empty:function(){this.notes.length=0,this.diffScore=0},add:function(t){this.notes.push(t),this.diffScore+=1,this.rearrange()},update:function(t,i){t<this.notes.length&&this.notes[t]&&this.notes[t].setNote(i)},remove:function(t){var i=this.notes.indexOf(t);return i>-1&&(this.notes[i]=null),this.diffScore+=2,this.rearrange(),i},removeNoteAtIndex:function(t){t<this.notes.length&&(this.notes[t]=null)},rearrange:function(){},findNoteAtPosition:function(t,i){for(var s=0;s<this.notes.length;s++){var n=this.notes[s];if(n&&n.pitch===t&&n.start<=i&&i<=n.start+n.dur)return n}return null},findNotesInTimeSpan:function(t,i){for(var s=[],n=0;n<this.notes.length;n++){var h=this.notes[n];h&&t<=h.start&&h.start<=i&&s.push(h)}return s.length>0?s:null},scanNotes:function(t,i){return this.findNotesInTimeSpan(t,i)},iterate:function(t){for(var i=0;i<this.notes.length;i++)t(i,this.notes[i])}},n.prototype={tick2sec:function(t){return t*this.TIS},sec2tick:function(t){return t/this.TIS},getAbsTimeInSec:function(t){return this.absOrigin+this.tick2sec(t)},getBPM:function(){return this.BPM},getNowInSec:function(){return this.now},getNow:function(){return this.sec2tick(this.now)},getLoopDurationInSec:function(){return this.loopEnd-this.loopStart},getLoopDuration:function(){return this.sec2tick(this.getLoopDurationInSec())},setBPM:function(i){this.BPM=i;var s=this.oldBPM/this.BPM;this.oldBPM=this.BPM,this.BIS=60/this.BPM,this.TIS=this.BIS/h,this.lookahead=16*this.TIS,this.now*=s,this.loopStart*=s,this.loopEnd*=s,this.absOrigin=t.now-this.now},setNowInSec:function(i){this.now=i,this.absOrigin=t.now-this.now;this.sec2tick(this.now)},setNow:function(t){this.setNowInSec(this.tick2sec(t))},setLoop:function(t,i){this.loopStart=this.tick2sec(t),this.loopEnd=this.tick2sec(i)},setScanRange:function(t){t?(this.scanStart=this.now,this.scanEnd=this.scanStart+this.lookahead,this.needsScan=!0):this.scanEnd-this.now<-.0167&&(this.scanStart=this.scanEnd,this.scanEnd=this.now+this.lookahead,this.needsScan=!0)},step:function(){if(this.RUNNING){var i=t.now;this.now+=i-this.absOldNow,this.absOldNow=i,this.scanNotes(),this.sendData(),this.flushPlaybackQ(),this.LOOP&&this.loopEnd-(this.now+this.lookahead)<0&&this.setNowInSec(this.loopStart-(this.loopEnd-this.now))}},scanNotes:function(){if(this.needsScan){for(var t=this.sec2tick(this.scanStart),i=this.sec2tick(this.scanEnd),s=0;s<this.notelists.length;s++){var n=this.notelists[s].scanNotes(t,i);if(n)for(var h=0;h<n.length;h++)this.playbackQ.indexOf(n[h])<0&&this.playbackQ.push(n[h])}this.needsScan=!1}this.setScanRange()},sendData:function(){for(var t=0;t<this.playbackQ.length;t++){var i=this.playbackQ[t],s=this.absOrigin+this.tick2sec(i.start),n=s+this.tick2sec(i.dur);this.targets[0].onData("noteon",{pitch:i.pitch,velocity:i.velocity,time:s}),this.targets[0].onData("noteoff",{pitch:i.pitch,velocity:0,time:n})}},_loop:function(){this.step(),this.updateView(),requestAnimationFrame(this._loop.bind(this))},isRunning:function(){return this.RUNNING},start:function(){this.flushPlaybackQ();var i=t.now;this.absOrigin=i-this.now,this.absOldNow=i,this.RUNNING=!0,this.setScanRange(!0)},pause:function(){this.RUNNING=!1,this.flushPlaybackQ()},rewind:function(){this.setNowInSec(0),this.setScanRange(!0)},addNoteList:function(t){this.notelists.push(t)},flushPlaybackQ:function(){this.playbackQ.length=0},addView:function(t){this.views.push(t)},updateView:function(){for(var t=0;t<this.views.length;t++)this.views[t].setPlayhead(this.sec2tick(this.now))},addTarget:function(t){this.targets.push(t)}},t.Note=function(t,s,n,h){return new i(t,s,n,h)},t.NoteList=function(){return new s},t.Transport=new n(120)}(WX);
window.MUI=function(e){function t(e,t,n){this.senderId=e,this.container=t,this.callback=n,this.ondragged=this.dragged.bind(this),this.onreleased=this.released.bind(this),this._prevTS=0,this.onclicked(t)}function n(e,t,n){this.senderId=e,this.container=t,this.callback=n,this.onkeypress=this.keypressed.bind(this),this.onblur=this.finished.bind(this),this.onfocus(t)}function i(e,t,n,i){this.x1=e,this.y1=t,this.x2=e+n,this.y2=t+i,this.w=n,this.h=i}return t.prototype={getEventData:function(e){var t=this.container.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey}},onclicked:function(e){e.addEventListener("mousedown",function(e){e.preventDefault(),this._prevTS=e.timeStamp;var t=this.getEventData(e);this.callback(this.senderId,"clicked",t),window.addEventListener("mousemove",this.ondragged,!1),window.addEventListener("mouseup",this.onreleased,!1)}.bind(this),!1)},dragged:function(e){if(e.preventDefault(),!(e.timeStamp-this._prevTS<16.7)){this._prevTS=e.timeStamp;var t=this.getEventData(e);this.callback(this.senderId,"dragged",t)}},released:function(e){e.preventDefault();var t=this.getEventData(e);this.callback(this.senderId,"released",t),window.removeEventListener("mousemove",this.ondragged,!1),window.removeEventListener("mouseup",this.onreleased,!1)}},n.prototype={onfocus:function(){this.container.addEventListener("mousedown",function(e){e.preventDefault(),this.callback(this.senderId,"clicked",null),this.container.addEventListener("keypress",this.onkeypress,!1),this.container.addEventListener("blur",this.onblur,!1)}.bind(this),!1)},keypressed:function(e){this.callback(this.senderId,"keypressed",e.keyCode)},finished:function(){this.callback(this.senderId,"finished",null),this.container.removeEventListener("keypress",this.onkeypress,!1),this.container.removeEventListener("blur",this.onblur,!1)}},i.prototype={containsPoint:function(e){return this.x1<=e.x&&e.x<=this.x2&&this.y1<=e.y&&e.y<=this.y2?!0:!1},getNormX:function(e){return(e.x-this.x1)/this.w},getNormY:function(e){return(e.y-this.y1)/this.h},getNormPosition:function(e){return{x:(e.x-this.x1)/this.w,y:(e.y-this.y1)/this.h}}},{clamp:function(e,t,n){return Math.max(Math.min(e,n),t)},clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e},findValueByKey:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value;return e[0].value},findKeyByValue:function(e,t){for(var n=0;n<e.length;n++)if(e[n].value===t)return e[n].key},MouseResponder:function(e,n,i){return new t(e,n,i)},KeyResponder:function(e,t,i){return new n(e,t,i)},buildControls:function(e,t){var n=document.getElementById(t);n.label=e.info.name;for(var i in e.params){var r=e.params[i];switch(r.type){case"Generic":var s=document.createElement("mui-knob");s.link(e,i),n.appendChild(s);break;case"Itemized":var o=document.createElement("mui-select");o.link(e,i),n.appendChild(o);break;case"Boolean":var a=document.createElement("mui-button");a.type="toggle",a.link(e,i),n.appendChild(a)}}},removeChildren:function(e){for(var t=document.getElementById(e);t.firstChild;)t.removeChild(t.firstChild)},$:function(e){return document.getElementById(e)},start:function(t){e.isObject(window.Platform)?window.addEventListener("polymer-ready",t):e.Log.error("FATAL: Platform/Polymer is not loaded.")}}}(WX);
window.Timebase=function(t){function i(t){return{beat:~~(t/o),tick:t%o}}function s(t){return t.beat*o+t.tick}function n(){this.pitch=60,this.velo=64,this.start=0,this.end=120,this.next=null}function e(){this.empty()}function h(t){this.BPM=t,this.oldBPM=t,this.absOrigin=0,this.absOldNow=0,this.now=0,this.loopStart=0,this.loopEnd=0,this.lookahead=0,this.BIS=0,this.TIS=0,this.playbackQ=[],this.notelists=[],this.views=[],this.RUNNING=!1,this.LOOP=!1,this.USE_METRONOME=!1,this.setBPM(t),this._loop()}var o=480;return n.prototype={get:function(){return{pitch:this.pitch,velo:this.velo,start:this.start,end:this.end}},getDuration:function(){return this.end-this.start},movePitch:function(i){this.pitch+=i,this.pitch=t.clamp(this.pitch,0,127)},moveTime:function(t){var i=this.end-this.start;this.moveStart(t),this.end=this.start+i},moveStart:function(i){this.start+=i,this.start=t.clamp(this.start,0,this.end-1)},moveEnd:function(t){this.end+=t,this.end=Math.max(this.end,this.start+1)},set:function(){t.isObject(arguments[0])?(this.pitch=arguments[0].pitch,this.velo=arguments[0].velo,this.start=arguments[0].start,this.end=arguments[0].end):(this.pitch=arguments[0],this.velo=arguments[1],this.start=arguments[2],this.end=arguments[3])},valueOf:function(){return this.start},toString:function(){return this.pitch+":"+this.velo+":"+this.start+":"+this.end}},e.prototype={add:function(t){if(null===this.head)return this.head=t,this.playhead=this.head,void this.size++;if(t<=this.head)return t.next=this.head,this.head=t,void this.size++;for(var i=this.head;i;){if(t>i){if(!i.next){i.next=t;break}if(t<=i.next){t.next=i.next,i.next=t;break}}i=i.next}return void this.size++},empty:function(){this.head=null,this.playhead=null,this.size=0},findNoteAtPosition:function(t,i){for(var s=this.head;s;){if(s.pitch===t&&s.start<=i&&i<=s.end)return s;s=s.next}return null},findNotesInArea:function(t,i,s,n){for(var e=this.findNotesInTimeSpan(s,n),h=[],o=0;o<e.length;o++){var a=e[o].pitch;t>a||a>i||h.push(e[o])}return h},findNotesInTimeSpan:function(t,i){for(var s=this.head,n=[];s&&s.start<=i;)t<=s.start&&n.push(s),s=s.next;return n.length>0?n:0},getSize:function(){return this.size},getArray:function(){for(var t=this.head,i=[];t;)i.push(t),t=t.next;if(i.length>0){for(var s=0;s<i.length;s++)i[s].next=null;return i}return null},iterate:function(t){for(var i=this.head,s=0;i;)t(i,s++),i=i.next},remove:function(t){if(null!==this.head){var i;if(this.head===t)return i=this.head,this.head=this.head.next,i.next=null,this.size--,i;for(var s=this.head;s;){if(s.next===t)return i=s.next,s.next=s.next.next,i.next=null,this.size--,i;s=s.next}return null}},rewind:function(){this.playhead=this.head},setPlayheadAtTick:function(t){if(this.playhead=this.head,this.playhead)for(;this.playhead.start<t;)this.playhead=this.playhead.next},scan:function(t){if(this.playhead){for(var i=[];this.playhead.start<t;)i.push(this.playhead),this.playhead=this.playhead.next;return i.length>0?i:null}},dump:function(){for(var t=this.head,i=[];t;)i.push(t.toString()),t=t.next;return i}},h.prototype={tick2sec:function(t){return t*this.TIS},sec2tick:function(t){return t/this.TIS},getAbsTimeInSec:function(t){return this.absOrigin+this.tick2sec(t)},getBPM:function(){return this.BPM},getNowInSec:function(){return this.now},getNow:function(){return this.sec2tick(this.now)},getLoopDurationInSec:function(){return this.loopEnd-this.loopStart},getLoopDuration:function(){return this.sec2tick(this.getLoopDurationInSec())},setBPM:function(i){this.BPM=i;var s=this.oldBPM/this.BPM;this.oldBPM=this.BPM,this.BIS=60/this.BPM,this.TIS=this.BIS/o,this.lookahead=32*this.TIS,this.now*=s,this.loopStart*=s,this.loopEnd*=s,this.absOrigin=t.now-this.now},setNowInSec:function(i){this.now=i,this.absOrigin=t.now-this.now;for(var s=this.sec2tick(this.now),n=0;n<this.notelists.length;n++)this.notelists[n].setPlayheadAtTick(s)},setNow:function(t){this.setNowInSec(this.tick2sec(t))},setLoop:function(t,i){this.loopStart=this.tick2sec(t),this.loopEnd=this.tick2sec(i)},step:function(){if(this.RUNNING){var i=t.now;this.now+=i-this.absOldNow,this.absOldNow=i,this.scanNotes(),this.flushPlaybackQ(),this.LOOP&&this.loopEnd-(this.now+this.lookahead)<0&&this.setNowInSec(this.loopStart-(this.loopEnd-this.now))}},scanNotes:function(){for(var t=0;t<this.notelists.length;t++){var i=this.sec2tick(this.now+this.lookahead),s=this.notelists[t].scan(i);s&&Array.prototype.push.apply(this.playbackQ,s)}},setScanPosition:function(t){for(var i=0;i<this.notelists.length;i++)this.notelists[i].setPlayheadAtTick(this.sec2tick(t))},_loop:function(){this.step(),this.updateView(),requestAnimationFrame(this._loop.bind(this))},isRunning:function(){return this.RUNNING},start:function(){this.playbackQ.length=0,this.setScanPosition(this.now);var i=t.now;this.absOrigin=i-this.now,this.absOldNow=i,this.RUNNING=!0},pause:function(){this.RUNNING=!1},rewind:function(){this.setNowInSec(0)},addNoteList:function(t){this.notelists.push(t)},removeNoteList:function(){},flushPlaybackQ:function(){this.playbackQ.length=0},updateView:function(t){for(var i=0;i<this.views.length;i++)this.views[i].update(t[i])}},{Util:{tick2mbt:i,mbt2tick:s},createNote:function(){var t=new n;return t.set.apply(t,arguments),t},createNoteList:function(){return new e},Transport:new h(120)}}(WX);
!function(e){function t(t){e.PlugIn.defineType(this,"Processor"),this._panner=e.Panner(),this._input.to(this._panner).to(this._output),this._panner.panningModel="equalpower",e.defineParams(this,{output:{type:"Generic",name:"Output","default":1,min:0,max:3.9810717055349722,unit:"LinearGain"},mute:{type:"Boolean",name:"Mute","default":!1},pan:{type:"Generic",name:"Pan","default":0,min:-1,max:1},dB:{type:"Generic",name:"dB","default":0,min:-60,max:12,unit:"Decibels"}}),e.PlugIn.initPreset(this,t)}t.prototype={info:{name:"Fader",version:"0.0.2",api_version:"1.0.0-alpha",author:"Hongchan Choi",type:"Processor",description:"Channel Fader"},defaultPreset:{mute:!1,pan:0,dB:0},$mute:function(t){t?this._outlet.gain.set(0,e.now,0):this._outlet.gain.set(1,e.now,0)},$pan:function(e){this._panner.setPosition(e,0,.5)},$dB:function(t,n,i){this.params.output.set(e.dbtolin(t),n,i)}},e.PlugIn.extendPrototype(t,"Processor"),e.PlugIn.register(t),e.Master=e.Fader(),e.Master.to(e._ctx.destination)}(WX);