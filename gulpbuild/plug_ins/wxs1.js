!function(e){"use strict";function t(t){e.PlugIn.defineType(this,"Generator"),this._osc1=e.OSC(),this._osc2=e.OSC(),this._osc1gain=e.Gain(),this._osc2gain=e.Gain(),this._lowpass=e.Filter(),this._amp=e.Gain(),this._osc1.to(this._osc1gain).to(this._lowpass),this._osc2.to(this._osc2gain).to(this._lowpass),this._lowpass.to(this._amp),this._amp.to(this._output),this._osc1.start(0),this._osc2.start(0),this._amp.gain.value=0,this.BUSY=!1,e.defineParams(this,{osc1type:{type:"Itemized",name:"Waveform","default":"square",model:e.WAVEFORMS},osc1octave:{type:"Generic",name:"Octave","default":0,min:-5,max:5,unit:"Octave"},osc1gain:{type:"Generic",name:"Gain","default":.5,min:0,max:1,unit:"LinearGain"},osc2type:{type:"Itemized",name:"Waveform","default":"square",model:e.WAVEFORMS},osc2detune:{type:"Generic",name:"Semitone","default":0,min:-60,max:60,unit:"Semitone"},osc2gain:{type:"Generic",name:"Gain","default":.5,min:0,max:1,unit:"LinearGain"},cutoff:{type:"Generic",name:"Cutoff","default":1e3,min:20,max:5e3,unit:"Hertz"},reso:{type:"Generic",name:"Reso","default":0,min:0,max:20,unit:""},filterMod:{type:"Generic",name:"FiltMod","default":1,min:.25,max:8,unit:""},filterAttack:{type:"Generic",name:"FiltAtt","default":.02,min:0,max:5,unit:"Seconds"},filterDecay:{type:"Generic",name:"FiltDec","default":.04,min:0,max:5,unit:"Seconds"},filterSustain:{type:"Generic",name:"FiltSus","default":.25,min:0,max:1},filterRelease:{type:"Generic",name:"FiltRel","default":.2,min:0,max:10,unit:"Seconds"},ampAttack:{type:"Generic",name:"Att","default":.02,min:0,max:5,unit:"Seconds"},ampDecay:{type:"Generic",name:"Dec","default":.04,min:0,max:5,unit:"Seconds"},ampSustain:{type:"Generic",name:"Sus","default":.25,min:0,max:1},ampRelease:{type:"Generic",name:"Rel","default":.2,min:0,max:10,unit:"Seconds"}}),e.PlugIn.initPreset(this,t)}t.prototype={info:{name:"WXS1",version:"0.0.2",api_version:"1.0.0-alpha",author:"Hongchan Choi",type:"Generator",description:"2 OSC Monophonic Subtractive Synth"},defaultPreset:{osc1type:"square",osc1octave:-1,osc1gain:.6,osc2type:"square",osc2detune:7,osc2gain:.6,cutoff:140,reso:18,filterMod:7,filterAttack:.01,filterDecay:.07,filterSustain:.5,filterRelease:.03,ampAttack:.01,ampDecay:.44,ampSustain:.2,ampRelease:.06,output:.8},$osc1type:function(e){this._osc1.type=e},$osc1octave:function(e,t,i){this._osc1.detune.set(1200*e,t,i)},$osc1gain:function(e,t,i){this._osc1gain.gain.set(e,t,i)},$osc2type:function(e){this._osc2.type=e},$osc2detune:function(e,t,i){this._osc2.detune.set(100*e,t,i)},$osc2gain:function(e,t,i){this._osc2gain.gain.set(e,t,i)},$cutoff:function(e,t,i){this._lowpass.frequency.set(e,t,i)},$reso:function(e,t,i){this._lowpass.Q.set(e,t,i)},noteOn:function(t,i,n){n=n||e.now;var a=this.params,s=a.ampAttack.get(),o=a.ampDecay.get(),c=1200*a.filterMod.get(),u=a.filterAttack.get(),m=a.filterDecay.get(),r=a.filterSustain.get();return this._osc1.frequency.set(e.mtof(t),n+.02,1),this._osc2.frequency.set(e.mtof(t),n+.02,1),this._amp.gain.set(1,[n,s],3),this._lowpass.detune.set(c,[n,u],3),this._amp.gain.set(r,[n+s,o],3),this._lowpass.detune.set(c*r,[n+u,m],3),this},glide:function(t,i){i=(i||e.now)+.04,this._osc1.frequency.set(e.mtof(t),i,1),this._osc2.frequency.set(e.mtof(t),i,1)},noteOff:function(t){t=t||e.now;var i=this.params;return this._amp.gain.cancel(t),this._lowpass.detune.cancel(t),this._amp.gain.set(0,[t,i.ampRelease.get()],3),this._lowpass.detune.set(0,[t,i.filterRelease.get()],3),this},onData:function(e,t){switch(e){case"noteon":this.noteOn(t.pitch,t.velocity,t.time);break;case"glide":this.glide(t.pitch);break;case"noteoff":this.noteOff(t.time)}}},e.PlugIn.extendPrototype(t,"Generator"),e.PlugIn.register(t)}(WX);