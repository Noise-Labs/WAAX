<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <h1>crash</h1>
    <script>

      var c = new webkitAudioContext();

      var o = c.createOscillator();
      var g = c.createGain();
      o.type = "square";
      o.frequency.value = 4;
      g.gain.value = 0.25;

      o.connect(g);
      o.start(0);
      //g.connect(c.destination);
      
      delayL = c.createDelay();
      delayR = c.createDelay();
      fbL = c.createGain();
      fbR = c.createGain();
      crosstalkL = c.createGain();
      crosstalkR = c.createGain();
      merger = c.createChannelMerger(2);

      g.connect(delayL);
      g.connect(delayR);
      delayL.connect(fbL);
      delayR.connect(fbR);
      fbL.connect(delayL);
      fbR.connect(delayR);
      fbL.connect(crosstalkR);
      fbR.connect(crosstalkL);
      crosstalkR.connect(delayR);
      crosstalkL.connect(delayL);
      delayL.connect(merger, 0, 0);
      delayR.connect(merger, 0, 1);

      left = c.createGain();
      right = c.createGain();
      merger2 = c.createChannelMerger(2);
      left.connect(merger2, 0, 0);
      right.connect(merger2, 0, 1);
      merger.connect(c.destination);
      
            
        // var i = WX.ITrain({ gain:1.0, freq:5 });
        // var pp = WX.Pingpong({ feedback:0.5, crosstalk:0.2 });
        // WX.DAC.db(-6);

        // i.to(pp).connect(WX.DAC._outputGain);
        
        // tryout: merger => merger problem
        // pp.to(WX.DAC); // CRASH!!
        // pp.connect(WX.DAC._outputGain); // OK
        // pp.connect(WX.DAC._merger); // CRASH!!
        // pp._delayL.connect(WX.DAC._merger, 0, 0); // OK
        // pp._delayR.connect(WX.DAC._merger, 0, 1); // OK
        // pp._merger.connect(WX.DAC._merger); // CRASH!!!
      

    </script>
  </body>
</html>