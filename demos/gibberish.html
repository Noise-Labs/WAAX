<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <h1>Gibberish</h1>
    <script src="../build/waax.min.js"></script>
    <script>
      // units
      var lfo = WX.Oscil({ freq:4, gain:5.0 }),
          saw = WX.Oscil({ type:"saw", gain: 0.9 }),
          fmt = WX.FormantV(),
          vrb = WX.Converb();
      
      // connection
      lfo.control(saw.freq_);
      saw.to(fmt).to(vrb).to(WX.DAC);        

      // score
      var n = WX.NoteName;
      var mel = [n.C2, n.D2, n.E2, n.F2, n.G2, n.A2, n.B2, n.C3].map(WX.pitch2freq);
      
      // development
      saw
        .freq(mel[0], WX.now);

      // wander
      function wander() {
        // set pitch and vibrato
        saw
          .freq(mel[WX.random2(0, 7)], WX.now + 0.5, "x")
          .gain(WX.random2f(0.5, 0.9), WX.now + 0.5, "l");
        lfo
          .freq(WX.random2f(5, 10), WX.now + 0.5, "x")
          .gain(WX.random2f(0.7, 1.4), WX.now + 0.5, "l");
        // the last param is the "slew" time
        var phi = Math.PI * 2 * Math.random();
        fmt.setPosition(Math.cos(phi), Math.sin(phi), 0.5);
        setTimeout(wander, 500);
      }
      wander();
    </script>
  </body>
</html>