<!DOCTYPE html>
<html>
  <head>
    <link href="../lib/Ktrl/UI.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1>Phasor</h1>

    <div class="ktrl-container" id="container"></div>

    <!-- lib r8 -->   
    <script src="../src/core/WAAX.js"></script>
    <script src="../src/core/Utils.js"></script>
    <script src="../src/core/Builtin.js"></script>
    <script src="../src/core/Unit.js"></script>
    <script src="../src/generator/Oscil.js"></script>
    <script src="../src/generator/Fmop.js"></script>
    <script src="../src/generator/Noise.js"></script>
    <script src="../src/generator/ITrain.js"></script>
    <script src="../src/generator/Sampler.js"></script>
    <script src="../src/generator/Step.js"></script>
    <script src="../src/processor/Fader.js"></script>
    <script src="../src/processor/Spatter.js"></script>
    <script src="../src/processor/ADSR.js"></script>
    <script src="../src/processor/Filter.js"></script>
    <script src="../src/processor/Formant.js"></script>
    <script src="../src/processor/FormantV.js"></script>
    <script src="../src/processor/Pingpong.js"></script>
    <script src="../src/processor/Chorus.js"></script>
    <script src="../src/processor/Phasor.js"></script>
    <script src="../src/processor/Comp.js"></script>
    <script src="../src/processor/Converb.js"></script>
    <script src="../src/analyzer/Waveform.js"></script>
    <script src="../src/analyzer/Spectrum.js"></script>
    <script src="../src/core/Boot.js"></script>

    <script src="../lib/Ktrl/UI.js"></script>
    <script>
      var gtr = WX.Sampler({ source:"../data/samples/cleangtr.wav", loop: true, gain: 1.8 }),
          pha = WX.Phasor();

      // connection
      gtr.to(pha).to(WX.DAC);
      setTimeout(function() {
        gtr.start(60, 0);
      }, 1000);

      var mixSlider = new SliderView("container");
      var mixControl = new Control(mixSlider, "Phasor Mix", "-", 0.2, 0.0, 1.0);
      // var blendSlider = new SliderView("container");
      // var blendControl = new Control(blendSlider, "Blend", "-", 0.7071, 0.0, 1.0);
      var baseSlider = new SliderView("container");
      var baseControl = new Control(baseSlider, "Base", "Hz", 60, 20, 2000, true);
      var spaceSlider = new SliderView("container");
      var spaceControl = new Control(spaceSlider, "Spacing", "-", 2, 1, 10);
      var rateSlider = new SliderView("container");
      var rateControl = new Control(rateSlider, "LFO Rate", "-", 0.5, 0.0, 1.0);
      var depthSlider = new SliderView("container");
      var depthControl = new Control(depthSlider, "LFO Depth", "-", 0.5, 0.0, 1.0);

      mixControl.onchange = function (value) {
        pha.mix(value, WX.now + 0.02, "l");
      }
      // blendControl.onchange = function (value) {
      //   cho.blend(value, WX.now + 0.02, "l");
      // }
      baseControl.onchange = function (value) {
        pha.base(value, WX.now);
      }
      spaceControl.onchange = function (value) {
        pha.space(value, WX.now);
      }
      rateControl.onchange = function (value) {
        pha.rate(value, WX.now + 0.02, "l");
      }
      depthControl.onchange = function (value) {
        pha.depth(value, WX.now + 0.02, "l");
      }
    </script>
  </body>
</html>