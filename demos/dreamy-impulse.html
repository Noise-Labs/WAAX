<!DOCTYPE html>
<html>
  <head>
    <link href="static/demos.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1>Dreamy Impulse</h1>
    <!-- lib r8 -->   
    <script src="../src/core/WAAX.js"></script>
    <script src="../src/core/Utils.js"></script>
    <script src="../src/core/Builtin.js"></script>
    <script src="../src/core/Unit.js"></script>
    <script src="../src/generator/Oscil.js"></script>
    <script src="../src/generator/Fmop.js"></script>
    <script src="../src/generator/Noise.js"></script>
    <script src="../src/generator/ITrain.js"></script>
    <script src="../src/generator/Sampler.js"></script>
    <script src="../src/generator/Step.js"></script>
    <script src="../src/processor/Fader.js"></script>
    <script src="../src/processor/Spatter.js"></script>
    <script src="../src/processor/ADSR.js"></script>
    <script src="../src/processor/Filter.js"></script>
    <script src="../src/processor/Filterbank.js"></script>
    <script src="../src/processor/Formant.js"></script>
    <script src="../src/processor/FormantV.js"></script>
    <script src="../src/processor/Pingpong.js"></script>
    <script src="../src/processor/Chorus.js"></script>
    <script src="../src/processor/Phasor.js"></script>
    <script src="../src/processor/Comp.js"></script>
    <script src="../src/processor/Converb.js"></script>
    <script src="../src/analyzer/Waveform.js"></script>
    <script src="../src/analyzer/Spectrum.js"></script>
    <script src="../src/core/Boot.js"></script>
    <!-- Ktrl -->
    <script src="../lib/Ktrl/Ktrl.js"></script>
    
    <script>
      // units
      var i = WX.ITrain({ gain:1.0, freq:9 }),
          f = WX.Filter({ cutoff:2500, Q:12 }),
          v = WX.Converb({ mix: 0.8 }),
          d = WX.Pingpong({ 
            delayTimeLeft: 0.600, delayTimeRight: 0.450, 
            feedbackLeft: 0.3, feedbackRight: 0.5,
            crosstalk: 0.25 
          });

      // connection
      i.to(f).to(v).to(d).to(WX.DAC);

      // dream on
      function dream() {
        var t1 = WX.now + 4, 
            t2 = WX.now + 8;
        f
          .cutoff(125).Q(12)
          .cutoff(2500 + Math.random() * 4000, t1, "x").Q(36, t1, "l")
          .cutoff(125, t2, "x").Q(12, t2, "l");
        setTimeout(dream, 8000);
      }
      dream();
    </script>
  </body>
</html>