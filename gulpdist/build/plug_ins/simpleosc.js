!function(WX){"use strict";function SimpleOsc(preset){WX.PlugIn.defineType(this,"Generator"),this._lfo=WX.OSC(),this._lfoGain=WX.Gain(),this._osc=WX.OSC(),this._amp=WX.Gain(),this._osc.to(this._amp).to(this._output),this._lfo.to(this._lfoGain).to(this._osc.detune),this._lfo.start(0),this._osc.start(0),this._amp.gain.value=0,WX.defineParams(this,{oscType:{type:"Itemized",name:"Waveform","default":"sine",model:WX.WAVEFORMS},oscFreq:{type:"Generic",name:"Freq","default":WX.mtof(60),min:20,max:5e3,unit:"Hertz"},lfoType:{type:"Itemized",name:"LFO Type","default":"sine",model:WX.WAVEFORMS},lfoRate:{type:"Generic",name:"Rate","default":1,min:0,max:20,unit:"Hertz"},lfoDepth:{type:"Generic",name:"Depth","default":1,min:0,max:500,unit:"LinearGain"}}),WX.PlugIn.initPreset(this,preset)}SimpleOsc.prototype={info:{name:"SimpleOsc",version:"0.0.2",api_version:"1.0.0-alpha",author:"Hongchan Choi",type:"Generator",description:"1 OSC with LFO"},defaultPreset:{oscType:"Sine",oscFreq:WX.mtof(60),lfoType:"Sine",lfoRate:1,lfoDepth:1},$oscType:function(value){this._osc.type=value},$oscFreq:function(value,time,rampType){this._osc.frequency.set(value,time,rampType)},$lfoType:function(value){this._lfo.type=value},$lfoRate:function(value,time,rampType){this._lfo.frequency.set(value,time,rampType)},$lfoDepth:function(value,time,rampType){this._lfoGain.gain.set(value,time,rampType)},noteOn:function(pitch,velocity,time){time=time||WX.now,this._amp.gain.set(velocity/127,[time,.02],3),this.params.oscFreq.set(WX.mtof(pitch),time+.02,0)},glide:function(pitch,time){time=time||WX.now,this.params.oscFreq.set(WX.mtof(pitch),time+.02,0)},noteOff:function(time){time=time||WX.now,this._amp.gain.set(0,[time,.2],3)},onData:function(action,data){switch(action){case"noteon":this.noteOn(data.pitch,data.velocity);break;case"glide":this.glide(data.pitch);break;case"noteoff":this.noteOff()}}},WX.PlugIn.extendPrototype(SimpleOsc,"Generator"),WX.PlugIn.register(SimpleOsc)}(WX);